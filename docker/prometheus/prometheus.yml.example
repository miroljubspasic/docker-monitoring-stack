---
# Prometheus Configuration Example
# Copy this file to prometheus.yml and configure with your production values

global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  # Local node exporter (monitoring stack itself)
  - job_name: "nodeexporter"
    static_configs:
      - targets: ["node-exporter:9100"]

  # Remote node exporter - Example Server 1
  - job_name: "nodeexporter-server1"
    metrics_path: "/node-exporter/metrics"
    scheme: "https"
    basic_auth:
      username_file: /etc/prometheus/secrets/username
      password_file: /etc/prometheus/secrets/password
    static_configs:
      - targets: ["example-server-1.example.com"]

  # Remote node exporter - Example Server 2
  - job_name: "nodeexporter-server2"
    metrics_path: "/node-exporter/metrics"
    scheme: "https"
    basic_auth:
      username_file: /etc/prometheus/secrets/username
      password_file: /etc/prometheus/secrets/password
    static_configs:
      - targets: ["example-server-2.example.com"]

  # Local cAdvisor (monitoring stack itself)
  - job_name: "cadvisor"
    static_configs:
      - targets: ["cadvisor:8080"]

  # Remote cAdvisor - Example Server 1
  - job_name: "cadvisor-server1"
    metrics_path: "/cadvisor/metrics"
    scheme: "https"
    basic_auth:
      username_file: /etc/prometheus/secrets/username
      password_file: /etc/prometheus/secrets/password
    static_configs:
      - targets: ["example-server-1.example.com"]

  # Remote cAdvisor - Example Server 2
  - job_name: "cadvisor-server2"
    metrics_path: "/cadvisor/metrics"
    scheme: "https"
    basic_auth:
      username_file: /etc/prometheus/secrets/username
      password_file: /etc/prometheus/secrets/password
    static_configs:
      - targets: ["example-server-2.example.com"]

  # Prometheus self-monitoring
  - job_name: "prometheus"
    static_configs:
      - targets: ["localhost:9090"]

  # FastAPI metrics via file service discovery (optional)
  # - job_name: "fastapi-metric"
  #   file_sd_configs:
  #   - files:
  #     - '/etc/prometheus/fastapi-targets.yml'

  # Application API metrics
  - job_name: "bo-api"
    metrics_path: "/metrics"
    scheme: "https"
    # bearer_token_file: /etc/prometheus/secrets/qdrant
    static_configs:
      - targets: ['example-api-1.example.com', 'example-api-2.example.com']
